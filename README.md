# DE-DB-2.9-DWH-SupBI
### Задание:В качестве ключевой задачи промежуточного проекта вам необходимо собрать воедино все знания полученные на предыдущих этапах обучения, а именно:
- docker-compose файл, который включает в себя:
1. сервис развертывания PostgreSQL
2. Одно из 2-х: либо сервис(ы) развертывания Superset, либо сервис(ы) развертывания Clickhouse
- Сервис развертывания PostgreSQL должен содержать в себе:
1. ddl-скрипты для инициализации всех 3-х слоев будущего DWH - в качестве примера можно взять DHW из раздела 2.6, либо разработать свое.
2. dml-скрипты для наполнения слоев данными
3. соответствующие volume для сохранения прогресса в работе контейнера
- Если вы выберите развертывание сервиса Superset, то вам необходимо на уровне ddl скриптов заложить создание таблиц на слое mart, которые составят основу будущих дашбордов. Логика и данные для дашборда могут быть достаточно простыми, но осмысленными. В качестве результата вам нужно будет приложить скрин полученного дашборда.
- Если вы выберите развертывания сервиса Clickhouse, то вам необходимо на уровне ddl скриптов заложить создание таблиц на слое mart, которые необходимо перенести с помощью инструментов миграции в СУБД Clickhouse. Скрипт миграции так же должен быть проинициализирован автоматически при создании контейнера с Clickhouse.
- Также вам необходимо приложить к решению логическую модель вашего DWH в виде ER-диаграммы, а также README-файл с описанием логики работы приложения. 
### Решение:Проектирование и реализация Data Warehouse Defined и его последующая интеграция с BI инструментом Superset в рамках курса "Инженер данных".
- В рамках данного задания создан DWH по продажам электроники в одном из сетевых магазинов(подойдет как пример учета продаж устройств с рук физического лица), написаны скрипты для создания таблиц и их наполнения с учётом слоёв Raw, Core, Mart. Логическая структура DWH представлена на ER-диаграмме по ссылке: <code>[./DWH.png](https://github.com/La-Haine-0/DE-DB-2.9-DWH-SupBI/blob/main/DWH.png)</code>.

- Скрипт DDL для создания таблиц для слоёв RAW, CORE: <code>[./init.sql](https://github.com/La-Haine-0/DE-DB-2.9-DWH-SupBI/blob/main/init.sql)</code>.

- Скрипт DML для заполнения слоёв RAW, CORE: <code>[./data.sql](https://github.com/La-Haine-0/DE-DB-2.9-DWH-SupBI/blob/main/data.sql)</code>.

- Скрипт для создания витрины данных: <code>[./data_mart.sql](https://github.com/La-Haine-0/DE-DB-2.9-DWH-SupBI/blob/main/data-mart.sql)</code>.

### Как развернуть проект?

Для работы с проектом необходимо иметь установленным Docker.

1. Скачиваем репозиторий DE-DB-2.9-DWH-SupBI:

```sh
git clone git@github.com:La-Haine-0/DE-DB-2.9-DWH-SupBI.git
```

2. Переходим в папку:

```sh
cd ./DE-DB-2.9-DWH-SupBI
```

3. Скачиваем Superset:

```sh
git clone https://github.com/apache/superset.git
```

4. Переходим в папку Superset:

```sh
cd superset
```

5. Добавляем данные из репозитория в Superset:

```sh
cp -f ./init.sql
```

```sh
cp -f ./data.sql
```

```sh
cp -f ./data-mart.sql
```

```sh
cp -f ./../docker-compose-non-dev.yml ./docker-compose-non-dev.yml
```

6. Запускаем docker-compose:

```sh
docker-compose -f docker-compose-non-dev.yml up -d
```

## Что дальше?

- Далее БД доступна в контейнере, либо по порту 5434 из любого сервиса для подключения к БД (например, DBeaver).
- Superset доступен по ссылке http://localhost:8088/